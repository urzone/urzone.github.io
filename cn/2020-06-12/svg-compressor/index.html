<!DOCTYPE html>
<html lang="cmn-Hans-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>SVG 图片批量压缩 - XiaO | 缄默之语</title>
    <meta property="og:title" content="SVG 图片批量压缩 - XiaO | 缄默之语">
    
    <meta name="twitter:card" content="summary">

    
      
    

    
      
      <meta property="description" content="SVG (Scalable Vector Graphics) 可缩放矢量图形是一种基于可扩展标记语言（XML），用于描述二维矢量图形的图形格式。
[&amp;hellip;] # 使用 homebrew 安装 brew install svgo # 压缩当前目录下的指定 svg 文件 svgo test.svg # 压缩当前目录下的多个指定 svg 文件 svgo test.svg other.svg &amp;hellip;">
      <meta property="og:description" content="SVG (Scalable Vector Graphics) 可缩放矢量图形是一种基于可扩展标记语言（XML），用于描述二维矢量图形的图形格式。
[&amp;hellip;] # 使用 homebrew 安装 brew install svgo # 压缩当前目录下的指定 svg 文件 svgo test.svg # 压缩当前目录下的多个指定 svg 文件 svgo test.svg other.svg &amp;hellip;">
      
    

    
    
    
    <meta name="twitter:image" content="/images/logo.png">
    
    

    

    
    
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    



<link rel="stylesheet" href="/css/custom.css" />


<link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png">
<link rel="manifest" href="/images/icons/manifest.json">
<link rel="mask-icon" href="/images/icons/safari-pinned-tab.svg" color="#cc342c">
<link rel="shortcut icon" href="/images/icons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="XiaO">
<meta name="application-name" content="XiaO">
<meta name="msapplication-TileColor" content="#603cba">
<meta name="msapplication-TileImage" content="/images/icons/mstile-144x144.png">
<meta name="msapplication-config" content="/images/icons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">
<meta name="google-site-verification" content="3C4lz-WqreDsFFohPRed1rO14aKeEDmTbw2lfIHN6og" />
  </head>

  
  <body class="cn">
    <header class="masthead">
      

<h1><a href="/"><img src="/images/logo.svg" alt="XiaO" /></a></h1>



      <nav class="menu">
  <ul>
  
  
  <li><a href="/">首页</a></li>
  
  <li><a href="/cn/">日志</a></li>
  
  <li><a href="/cn/note/">缄语</a></li>
  
  <li><a href="/cn/vitae/">简历</a></li>
  
  <li><a href="/en/">English</a></li>
  
  

<li class="menu-extra"></li>


<li><a href="/cn/index.xml" type="application/rss+xml" title="RSS feed">订阅</a></li>

<li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="Attribution-NonCommercial-ShareAlike 4.0 International">版权</a></li>


  </ul>
</nav>

    </header>

    <article class="main">
      <header class="title">
      
<h1>SVG 图片批量压缩</h1>


<h3>XiaO / 
2020-06-12</h3>

<hr>


      </header>



<p>SVG (Scalable Vector Graphics) <a href="https://zh.wikipedia.org/wiki/%E5%8F%AF%E7%B8%AE%E6%94%BE%E5%90%91%E9%87%8F%E5%9C%96%E5%BD%A2">可缩放矢量图形</a>是一种基于可扩展标记语言（XML），用于描述二维矢量图形的图形格式。</p>
<h3 id="svg-图片特点">SVG 图片特点</h3>
<ul>
<li>SVG 图形文件可读，SVG 文件其实只是普通的文本文件，用一般的文本编辑器便可查看或修改；</li>
<li>SVG 图形格式可以方便的建立文字索引，从而实现<a href="https://zh.wikipedia.org/wiki/%E5%9F%BA%E4%BA%8E%E5%86%85%E5%AE%B9%E7%9A%84%E5%9B%BE%E5%83%8F%E6%90%9C%E7%B4%A2">基于内容的图像搜索</a>；</li>
<li>SVG 图形格式支持多种<a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Element/filter">滤镜和特殊效果</a>；</li>
<li>SVG 图形格式可以用来动态生成图形。</li>
</ul>
<h3 id="svgo4-图片压缩"><a href="https://github.com/svg/svgo">SVGO</a> 图片压缩</h3>
<ul>
<li>SVGO 是一款基于 Node.js 的 SVG 图形压缩工具，命令行软件。</li>
</ul>
<pre><code># 使用 homebrew 安装
brew install svgo 

# 压缩当前目录下的指定 svg 文件
svgo test.svg 

# 压缩当前目录下的多个指定 svg 文件
svgo test.svg other.svg third.svg 

# 压缩当前目录下的所有 svg 文件
svgo *.svg 

# 压缩某个文件夹下的所有 svg 文件，并指定新的存放位置
svgo -f ../path/to/input/folder -o ../path/to/output/folder 

# 压缩 data URI base64 字符，并指定生成文件
svgo -s 'data:image/svg+xml;base64,...' -o test.min.svg 
</code></pre><p>另有基于 SVGO 的其他软件，或为网页版本，或为图形界面应用等：</p>
<ul>
<li><a href="https://jakearchibald.github.io/svgomg/">SVGOMG</a> 网页版 SVG 压缩工具；</li>
<li>macOS 的文件夹快速工具 <a href="https://github.com/svg/svgo-osx-folder-action">OS X Folder Action</a>；</li>
<li><a href="https://image-shrinker.com">Image Shrinker</a> 可同时压缩 JPG, PNG 和 SVG 的 macOS 图形界面应用；</li>
</ul>
<h3 id="svgcleaner9-一款追求压缩质量与效率的软件"><a href="https://github.com/RazrFalcon/svgcleaner-gui/">SVGCleaner</a> 一款追求压缩质量与效率的软件</h3>
<pre><code># 使用 homebrew 安装命令行软件
brew install svgcleaner 

svgcleaner input.svg out.svg # 

# 使用 homebrew 安装其图形界面软件
brew cask install svgo 
</code></pre><h3 id="scour11-是一款基于-python-的-svg-压缩软件"><a href="https://github.com/scour-project/scour">Scour</a> 是一款基于 python 的 svg 压缩软件</h3>
<pre><code># 使用 homebrew 安装命令行软件
brew install scour

scour -i input.svg -o output.svg # 压缩当前路径下的某个图片，软件本身无法对文件夹进行操作，即批量处理需要借助其他方法
</code></pre><p>利用 Automator 创建快捷服务进行批量处理：</p>
<p>Automator -&gt; Quick Action -&gt; Actions -&gt; Run Shell Script</p>
<p>在 Shell Script ，设置输入参数为自变量，并执行如下代码：</p>
<pre><code>export PATH=/usr/local/bin:$PATH # 将软件路径加入到 PATH 变量
mkdir ~/ScourCompressedImg # 在根目录创建 ScourCompressedImg 文件夹

for f in &quot;$@&quot;
do
	if [ ${f##*.} = &quot;svg&quot; ] # 判断需处理的文件类型是 svg 图片
	then
		  file=${f##*/} # 提取原文件，包含名字和后缀，赋值给变量 file
  		file_name=${file%.*} # 提取原文件名字，赋值给变量 file_name
  		scour -i $f -o ~/ScourCompressedImg/$file_name.svg # 使用 scour 压缩文件后，放入 ScourCompressedImg 文件夹中
	fi
done

open ~/ScourCompressedImg/ # 完成后，打开该文件夹
</code></pre><p><img src="/media/image/cn-2020-06-12-svg-01.png" alt=""></p>
<p>关于 shell 中的<a href="https://www.runoob.com/linux/linux-shell-variable.html">变量</a> 和<a href="https://www.runoob.com/linux/linux-shell-passing-arguments.html">参数传递</a></p>
<pre><code>file_name=&quot;abc&quot; # 定义变量时，变量名不加美元符号（$）,变量名和等号之间不能有空格。除了显式地直接赋值，还可以用语句给变量赋值。

$file_name # 使用一个定义过的变量，只要在变量名前面加美元符号即可
${file_name} # 变量名外面的花括号，加不加都行，加花括号是为了帮助解释器识别变量的边界

echo &quot;This file is &quot;$file_name&quot; !&quot; # 双引号拼接字符串
echo &quot;How to use the file, ${file_name} !&quot; # 双引号拼接字符串，双引号里可以有变量
ehco 'hello, '$file_name' !'  单引号可成对出现，作为字符串拼接使用

$@ # 使用时加引号，并在引号中返回每个参数。如 &quot;$@&quot; ，用「&quot;」括起来，即以&quot;$1&quot; &quot;$2&quot; … &quot;$n&quot; 的形式输出所有参数。
</code></pre><h3 id="软件的默认压缩率比较">软件的默认压缩率比较</h3>
<p>由包含文字和图片的中英 pdf 文件通过 pdf2svg 转换而来的 svg 文件夹，原始大小为 79.8 M。通过不同的压缩软件压缩后的体积比较，所示如下：</p>
<pre><code>% du -hs * | sort -nr

 76M	OriginalFiles
 62M	Scour
 57M	SVGCleaner
 39M	SVGO
 39M	Image Shrinker
</code></pre><p>语法：在 shell 中查看当前文件夹下的<strong>文件和文件夹</strong>的大小</p>
<pre><code>du [options] [files| directories] # disk usage occupied by files or directories

-k Measure usage in kilobytes.
-m Measure usage in megabytes.
-g Measure usage in gigabytes.
-h Print in human-readable units.
-s Print only the total size.
-L Follow symbolic links and measure the files they point to.

du myfile myfile2 # 直接读取两个文件的大小
</code></pre><p>采用各软件的默认设置直接压缩图片的结果来看，SVGO 的压缩比率最大，SVGCleaner 次之，Scour 压缩率最低。这可能与不同软件所采用的<strong>默认路径座标精度</strong>等设置以及各自的算法不同所致。而基于 svgo 的软件其压缩率是相同的。</p>
<p>另外，就文件处理时长来看，SVGO 和 SVGCleaner 的速度都不错，明显比 Scour 来得快得多。</p>
<p>通过 <code>⌘ + i</code> 查看的文件夹大小所示如下：</p>
<p><img src="/media/image/cn-2020-06-12-svg-02.png" alt=""></p>
<p>这里有有一个意思的问题，shell 中查到的文件夹大小和通过 <code>⌘ + i</code> 查看的文件夹大小，为什么不一致呢？</p>


  <footer>
  
<nav class="post-nav">
  <span class="nav-prev">&larr; <a href="/cn/2020-06-11/homebrew/">Homebrew 个人使用记录</a></span>
  <span class="nav-next"><a href="/cn/2020-06-12/special-characters-in-shell/">shell 中的特殊符号</a> &rarr;</span>
</nav>
<script type="text/javascript">
document.addEventListener('keyup', function(e) {
  if (e.target.nodeName.toUpperCase() != 'BODY') return;
  var url = false;
  if (e.which == 37) {  
    
    url = '\/cn\/2020-06-11\/homebrew\/';
    
  } else if (e.which == 39) {  
    
    url = '\/cn\/2020-06-12\/special-characters-in-shell\/';
    
  }
  if (url) window.location = url;
});
</script>






<script async src="/js/fix-toc.js"></script>


<script async src="/js/center-img.js"></script>


<script async src="/js/right-quote.js"></script>


<script async src="/js/fix-footnote.js"></script>


<script async src="/js/math-code.js"></script>


<script async src="/js/external-link.js"></script>


<script async src="/js/alt-title.js"></script>


<script async src="/js/header-link.js"></script>




<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-1988641-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-1988641-2');
</script>

  
  
  <hr>
  <div class="copyright">© <a href="/">XiaO</a> 2006 - 2020</div>
  
  </footer>
  </article>
  
  </body>
</html>

